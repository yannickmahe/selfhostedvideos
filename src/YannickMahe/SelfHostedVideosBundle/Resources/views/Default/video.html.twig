{% extends "YannickMaheSelfHostedVideosBundle::layout.html.twig" %}

{% block title %}{{ video.name }}{% endblock %}

{% block page_stylesheets %}<link rel="stylesheet" type="text/css" href="http://releases.flowplayer.org/5.3.2/skin/minimalist.css" />{% endblock %}

{% block menu %}
   {% include "YannickMaheSelfHostedVideosBundle:Default:menu.html.twig" with {'current': '', 'q': ''} %}
{% endblock %}

{% block content %}
<div class="page-header">
<h1>{{ video.name|truncate(30,true,'...') }}</h1>
</div>

<div style="text-align:center;">
	<div class="flowplayer">
	   <video>
	      <source type="video/mp4" src="{{ app.request.scheme ~ '://' ~ app.request.host ~ '/' ~ video.webPath }}"/>
	   </video>
	</div>
</div>
<hr />
<div class="btn-toolbar">
	<div class="btn-group">
		<a class="btn" onclick="$('body').toggleClass('dark');">Toggle cinema mode</a>
	</div>
	<div class="btn-group">
		<a class="btn btn-primary" href="{{ app.request.scheme ~ '://' ~ app.request.host ~ '/' ~ video.webPath }}">
			<i class="icon-download icon-white"></i> Download {{ video.name }}
		</a>
	</div>
	<div class="btn-group">
		<a class="btn btn-danger" data-toggle="modal" href="#modal-delete">
			<i class="icon-remove-sign icon-white"></i> Delete this video
		</a>
	</div>
</div>

<div class="modal hide fade" id="modal-delete">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Are you sure?</h3>
  </div>
  <div class="modal-body" style="text-align: center;">
    <img style="margin-left: auto; margin-right: auto;" src="{{ app.request.scheme ~ '://' ~ app.request.host ~ '/' ~ video.thumbnailWebPath }}" alt={{ video.name }}/>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn">Cancel</a>
    <a href="#" class="btn btn-danger"><i class="icon-remove-sign icon-white"></i> Yes, delete this video</a>
  </div>
</div>

{% endblock %}

{% block page_javascripts %}
	<script>
		$(document).ready(function(){
			var vidWidth = $('#main-container').width();
			$('.flowplayer').css('width',Math.min(vidWidth,{{ video.width }}))
		})
	</script>
	<script src="http://releases.flowplayer.org/5.3.2/flowplayer.min.js"></script>
{% endblock %}